(()=>{"use strict";var t={539:(t,e,n)=>{n.d(e,{Z:()=>o});var r=n(645),a=n.n(r)()((function(t){return t[1]}));a.push([t.id,".clear-filter-icon[data-v-93e28224]{right:2.5rem;top:1rem}textarea[data-v-93e28224]{min-width:220px}.whitespace-nowrap[data-v-93e28224]{white-space:nowrap}",""]);const o=a},645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=t(e);return e[2]?"@media ".concat(e[2]," {").concat(n,"}"):n})).join("")},e.i=function(t,n,r){"string"==typeof t&&(t=[[null,t,""]]);var a={};if(r)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var s=0;s<t.length;s++){var l=[].concat(t[s]);r&&a[l[0]]||(n&&(l[2]?l[2]="".concat(n," and ").concat(l[2]):l[2]=n),e.push(l))}},e}},379:(t,e,n)=>{var r,a=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},o=function(){var t={};return function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}t[e]=n}return t[e]}}(),i=[];function s(t){for(var e=-1,n=0;n<i.length;n++)if(i[n].identifier===t){e=n;break}return e}function l(t,e){for(var n={},r=[],a=0;a<t.length;a++){var o=t[a],l=e.base?o[0]+e.base:o[0],c=n[l]||0,u="".concat(l," ").concat(c);n[l]=c+1;var d=s(u),f={css:o[1],media:o[2],sourceMap:o[3]};-1!==d?(i[d].references++,i[d].updater(f)):i.push({identifier:u,updater:m(f,e),references:1}),r.push(u)}return r}function c(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var a=n.nc;a&&(r.nonce=a)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var i=o(t.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(e)}return e}var u,d=(u=[],function(t,e){return u[t]=e,u.filter(Boolean).join("\n")});function f(t,e,n,r){var a=n?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=d(e,a);else{var o=document.createTextNode(a),i=t.childNodes;i[e]&&t.removeChild(i[e]),i.length?t.insertBefore(o,i[e]):t.appendChild(o)}}function p(t,e,n){var r=n.css,a=n.media,o=n.sourceMap;if(a?t.setAttribute("media",a):t.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var v=null,h=0;function m(t,e){var n,r,a;if(e.singleton){var o=h++;n=v||(v=c(e)),r=f.bind(null,n,o,!1),a=f.bind(null,n,o,!0)}else n=c(e),r=p.bind(null,n,e),a=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(n)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else a()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=a());var n=l(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<n.length;r++){var a=s(n[r]);i[a].references--}for(var o=l(t,e),c=0;c<n.length;c++){var u=s(n[c]);0===i[u].references&&(i[u].updater(),i.splice(u,1))}n=o}}}}},e={};function n(r){var a=e[r];if(void 0!==a)return a.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,n),o.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.nc=void 0,(()=>{function t(t,e,n,r,a,o,i,s){var l,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),r&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),i?(l=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),a&&a.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},c._ssrRegister=l):a&&(l=s?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:t,options:c}}function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}const r={components:{AddRowModal:t({name:"AddRowModal",props:{group:{},existingKeys:{}},data:function(){return{keyName:""}},methods:{handleClose:function(){this.$emit("close")},handleSubmit:function(){this.keyName=this.keyName.trim(),-1!=this.existingKeys.indexOf(this.keyName)?this.$toasted.show("This key is already in use",{type:"error"}):this.$emit("create",this.keyName)}},mounted:function(){this.$refs.keyNameInput.focus()}},(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("modal",[n("form",{staticClass:"bg-white rounded-lg shadow-lg overflow-hidden",attrs:{autocomplete:"off"},on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[n("div",[n("heading",{staticClass:"border-b border-40 py-4 px-2",attrs:{level:2}},[t._v(t._s(t.__("Create"))+' "'+t._s(t.group)+'"')]),t._v(" "),n("div",{staticClass:"p-3"},[n("label",{staticClass:"inline-block text-80 mb-2 leading-tight nova-form-label"},[t._v(t._s(t.__("Key of new translation")))]),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyName,expression:"keyName"}],ref:"keyNameInput",staticClass:"w-full form-control form-input form-input-bordered",attrs:{type:"text",required:""},domProps:{value:t.keyName},on:{input:function(e){e.target.composing||(t.keyName=e.target.value)}}})])],1),t._v(" "),n("div",{staticClass:"bg-30 px-6 py-3 flex"},[n("div",{staticClass:"flex items-center ml-auto"},[n("button",{staticClass:"btn text-80 font-normal h-9 px-3 mr-3 btn-link",attrs:{type:"button"},on:{click:t.handleClose}},[t._v("\n          "+t._s(t.__("Cancel"))+"\n        ")]),t._v(" "),n("button",{staticClass:"btn btn-default btn-primary",attrs:{type:"submit"}},[n("span",[t._v(t._s(t.__("Create")))])])])])])])}),[],!1,null,"05dcb287",null).exports},metaInfo:function(){return{title:this.title+" - "+this.currentGroup}},data:function(){return{title:"Nova Translation Editor",apiUrl:"/nova-vendor/nova-translation-editor/",translations:null,changedTranslations:[],currentGroup:null,showNewModal:!1,loaded:!1,languages:[],useTabs:!0,filterString:""}},mounted:function(){this.getData()},computed:{existingKeys:function(){return Object.keys(this.translations[this.currentGroup])},showTable:function(){return this.translations&&Object.keys(this.translations).length>0},filterdTranslations:function(){var t={};if(this.filterString)for(var e in this.translations){var n=this.translations[e];for(var r in t[e]={},n)for(var a in n[r]){var o=n[r][a],i=new RegExp(this.filterString,"i");(o.match(i)||r.match(i))&&(t[e][r]=n[r])}}else t=this.translations;return t},filterdTranslations2:function(){return Array.concat(this.filterdTranslations,this.changedTranslations)}},methods:{getData:function(){var t=this;Nova.request().get(this.apiUrl+"index").then((function(e){t.loaded=!0,e.data&&e.data.translations&&(t.translations=e.data.translations,t.languages=e.data.languages,t.currentGroup=Object.keys(t.translations)[0])}))},search:function(t,e){if(e&&e.search(this.filterString)>=0)return t;for(var n in t){var r=t[n];if("string"!=typeof r)return this.search(r,n);if(r.search(this.filterString)>=0)return t}return null},addRow:function(t){var n={};for(var r in this.languages)n[this.languages[r]]="";"object"===e(this.translations[this.currentGroup])&&(this.translations[this.currentGroup]={}),this.$set(this.translations[this.currentGroup],t,n),this.showNewModal=!1},save:function(t){var e=this,n={};if(t&&"string"==typeof t)n[t]=this.changedTranslations[t];else for(var r in this.changedTranslations)n[r]=this.changedTranslations[r];Nova.request().post(this.apiUrl+"save",{data:n}).then((function(t){e.$toasted.show("Saved",{type:"success"})})).catch((function(t){e.$toasted.show(t,{type:"error"})}))},translationChanged:function(t,e,n,r){this.changedTranslations[t]=this.changedTranslations[t]||{},this.changedTranslations[t][e]=this.changedTranslations[t][e]||this.translations[t][e],this.changedTranslations[t][e][n]=r.target.value}}};var a=n(379),o=n.n(a),i=n(539),s={insert:"head",singleton:!1};o()(i.Z,s);i.Z.locals;const l=t(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("heading",{staticClass:"mb-6"},[t._v(t._s(t.title))]),t._v(" "),n("div",{staticClass:"flex border-b-2 border-50"},[n("div",{staticClass:"w-1/5 px-8 py-2"},[n("label",{staticClass:"inline-block text-80 pt-2 leading-tight"},[t._v(t._s(t.__("Filter")))])]),t._v(" "),n("div",{staticClass:"w-4/5 py-2 px-8 relative"},[t.filterString?n("span",{staticClass:"cursor-pointer text-primary absolute clear-filter-icon",attrs:{title:t.__("Clear filter")},on:{click:function(e){t.filterString=""}}},[n("svg",{staticClass:"w-6 h-6",attrs:{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"}},[n("path",{attrs:{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"}})])]):t._e(),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.filterString,expression:"filterString"}],staticClass:"w-4/5 form-control form-input form-input-bordered",attrs:{type:"text",placeholder:t.__("Filter")+": By key or translation"},domProps:{value:t.filterString},on:{input:function(e){e.target.composing||(t.filterString=e.target.value)}}})])]),t._v(" "),t.showTable?n("card",{staticClass:"my-6"},[n("nav",{staticClass:"bg-white px-8 pt-2 border-b-2 border-50 overflow-x-auto overflow-y-hidden text-center cursor-pointer whitespace-nowrap"},t._l(t.filterdTranslations2,(function(e,r){return n("a",{key:r,staticClass:"no-underline border-b-2 uppercase tracking-wide font-bold text-s py-3 mx-2 px-3 inline-block",class:t.currentGroup===r?"text-primary border-primary":" text-grey border-transparent",on:{click:function(e){t.currentGroup=r}}},[t._v("\n          "+t._s(r)+" ("+t._s(Object.keys(e).length)+")\n        ")])})),0),t._v(" "),t._l(t.filterdTranslations2,(function(e,r){return t.currentGroup===r?n("div",{key:r+"tab",staticClass:"overflow-x-auto"},[n("table",{staticClass:"table w-full"},[n("thead",[n("tr",[n("th",{staticClass:"text-left"},[t._v("Key")]),t._v(" "),t._l(t.languages,(function(e){return n("th",{staticClass:"text-left"},[t._v("Translation "+t._s(e))])}))],2)]),t._v(" "),n("tbody",t._l(e,(function(e,a){return n("tr",[n("td",{staticClass:"text-left py-2"},[t._v("\n            "+t._s(a)+"\n            "),n("p",{staticClass:"text-xs\tmt-2 text-dark-grey"},[t._v(t._s(r)+"."+t._s(a))])]),t._v(" "),t._l(t.languages,(function(o){return n("td",{staticClass:"text-left"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e[o],expression:"trans[lang]"}],staticClass:"w-full form-input form-input-bordered py-3 m-1 h-auto",domProps:{value:e[o]},on:{input:[function(n){n.target.composing||t.$set(e,o,n.target.value)},function(e){return t.translationChanged(r,a,o,e)}]}})])}))],2)})),0)]),t._v(" "),n("div",{staticClass:"text-center p-3"},[n("button",{staticClass:"btn btn-default btn-primary",on:{click:function(e){t.showNewModal=!0}}},[t._v("Add row")]),t._v(" "),n("button",{staticClass:"btn btn-default btn-primary mr-3",attrs:{type:"button"},on:{click:function(e){return t.save(t.currentGroup)}}},[t._v(t._s(t.__("Save"))+' "'+t._s(t.currentGroup)+'"')])])]):t._e()}))],2):t._e(),t._v(" "),t.showTable?n("div",{staticClass:"text-right my-2"},[n("a",{staticClass:"btn btn-link dim cursor-pointer text-80 ml-auto mr-6 router-link-active nova-router-link nova-cancel-button",on:{click:function(e){return t.$router.go()}}},[t._v("\n      "+t._s(t.__("Cancel"))+"\n    ")]),t._v(" "),n("button",{staticClass:"btn btn-default btn-primary",attrs:{type:"button"},on:{click:function(e){return t.save()}}},[t._v(t._s(t.__("Save all")))])]):t._e(),t._v(" "),t.showNewModal?n("add-row-modal",{attrs:{group:t.currentGroup,"existing-keys":t.existingKeys},on:{close:function(e){t.showNewModal=!1},create:t.addRow}}):t._e(),t._v(" "),!t.showTable&&t.loaded?n("div",{staticClass:"toasted nova error"},[n("p",{staticClass:"mb-2"},[t._v("You have not translation groups (aka translation file) activated in your `config/nova-translation-editor.php` config file.")]),t._v(" "),n("p",[t._v("Please add at least one group to the `groups` array element (for example `auth`, `validation`, etc.).")])]):t._e()],1)}),[],!1,null,"93e28224",null).exports;Nova.booting((function(t,e,n){e.addRoutes([{name:"nova-translation-editor",path:"/nova-translation-editor",component:l}])}))})()})();